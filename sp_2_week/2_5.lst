5	000F	COPY	START	F
10	000F	FIRST	STL	RETADR		17202D
15	0012	 	LDB	#LENGTH		69202D
20	 	 	BASE	LENGTH
25	0015	CLOOP	+JSUB	RDREC		4B101045
30	0019	 	LDA	LENGTH		032026
35	001C	 	COMP	#0		290000
40	001F	 	JEQ	ENDFIL		332007
45	0022	 	+JSUB	WRREC		4B10106C
50	0026	 	J	CLOOP		3F2FEC
55	0029	ENDFIL	LDA	EOF		032010
60	002C	 	STA	BUFFER		0F2016
65	002F	 	LDA	#3		010003
70	0032	 	STA	LENGTH		0F200D
75	0035	 	+JSUB	WRREC		4B10106C
80	0039	 	J	@RETADR		3E2003
85	003C	EOF	BYTE	C'EOF'		454F46
90	003F	RETADR	RESW	1
95	0042	LENGTH	RESW	1
100	0045	BUFFER	RESB	4096
105	 	.	 	 
110	 	.      SUBROUTINE TO READ RECORD INTO BUFFER	 	 
115	 	.	 	 
120	1045	RDREC	CLEAR	X		B410
125	1047	 	CLEAR	A		B400
130	1049	 	CLEAR	S		B440
135	104B	 	+LDT	#4096		75101000
140	104F	RLOOP	TD	INPUT		E32019
145	1052	 	JEQ	RLOOP		332FFA
150	1055	 	RD	INPUT		DB2013
155	1058	 	COMPR	A, S		A004
160	105A	 	JEQ	EXIT		332008
165	105D	 	STCH	BUFFER, X	57C003
170	1060	 	TIXR	T		B850
175	1062	 	JLT	RLOOP		3B2FEA
180	1065	EXIT	STX	LENGTH		134000
185	1068	 	RSUB	 		4F0000
190	106B	INPUT	BYTE	X'F1'		F1
195	 	.	 	 
200	 	.      SUBROUTINE TO WRITE RECORD FROM BUFFER	 	 
205	 	.	 	 
210	106C	WRREC	CLEAR	X		B410
215	106E	 	LDT	LENGTH		774000
220	1071	WLOOP	TD	OUTPUT		E32011
225	1074	 	JEQ	WLOOP		332FFA
230	1077	 	LDCH	BUFFER, X	53C003
235	107A	 	WD	OUTPUT		DF2008
240	107D	 	TIXR	T		B850
245	107F	 	JLT	WLOOP		3B2FEF
250	1082	 	RSUB	 		4F0000
255	1085	OUTPUT	BYTE	X'05'		05
260		 	END	FIRST
